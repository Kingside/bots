<!DOCTYPE html>  <html> <head>   <title>generator.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="generator.html">                 generator.coffee               </a>                                           <a class="source" href="index.html">                 index.coffee               </a>                                           <a class="source" href="campfire.html">                 campfire.coffee               </a>                                           <a class="source" href="cli.html">                 cli.coffee               </a>                                           <a class="source" href="xmpp.html">                 xmpp.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               generator.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span> <span class="s1">&#39;fs&#39;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">version</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">unless</span> <span class="nx">name</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;Usage: bots NAME&quot;</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="o">-</span><span class="mi">1</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;Generating #{name}&quot;</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">mkdir</span> <span class="nx">name</span><span class="p">,</span> <span class="s1">&#39;0755&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="k">throw</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span> <span class="s2">&quot;#{name}/index.js&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">var bots = require(&#39;bots&#39;);</span>

<span class="s2">var #{name} = bots.createBot(&#39;#{name} 0.0.0&#39;);</span>

<span class="s2">#{name}.use(bots.cli());</span>

<span class="s2">#{name}.desc(&#39;ping&#39;, &#39;smoke test&#39;);</span>
<span class="s2">#{name}.hear(/ping/, function(msg) {</span>
<span class="s2">  msg.say(&#39;pong from &#39; + this.name);</span>
<span class="s2">});</span>

<span class="s2">#{name}.desc(&#39;tell me about THING&#39;, &#39;Searches twitter for THING&#39;);</span>
<span class="s2">#{name}.hear(/tell me about (.+)/, function(msg) {</span>
<span class="s2">  this.get(&#39;http://search.twitter.com/search.json?lang=en&amp;q=&#39; + msg.match[1], function(body) {</span>
<span class="s2">    body.results.forEach(function(tweet) {</span>
<span class="s2">      msg.say(tweet.text);</span>
<span class="s2">    });</span>
<span class="s2">  });</span>
<span class="s2">});</span>

<span class="s2">#{name}.on(&#39;start&#39;, function() {</span>
<span class="s2">  console.log(&quot;</span><span class="nx">Try</span> <span class="nx">typing</span> <span class="s1">&#39;help&#39;</span> <span class="o">or</span> <span class="s1">&#39;ping&#39;</span><span class="p">.</span><span class="s2">&quot;);</span>
<span class="s2">});</span>

<span class="s2">#{name}.start();</span>

<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">-&gt;</span>
      <span class="k">throw</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span> <span class="s2">&quot;#{name}/package.json&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">{</span>
<span class="s2">  &quot;</span><span class="nx">name</span><span class="s2">&quot;: &quot;</span><span class="c1">#{name}&quot;,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;0.0.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;author&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;./index&quot;</span><span class="p">,</span>
  <span class="s2">&quot;engines&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;node&quot;</span><span class="o">:</span> <span class="s2">&quot;0.4&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;dependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;bots&quot;</span><span class="o">:</span> <span class="s2">&quot;#{version}&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;scripts&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="s2">&quot;node index.js&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="s2">&quot;&quot;&quot;, (err) -&gt;</span>
<span class="s2">        throw err if err</span>
<span class="s2">        fs.writeFile &quot;</span><span class="c1">#{name}/README.md&quot;, &quot;&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h1>{name}</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>Install</h1>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">npm</span> <span class="nx">install</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h1>Usage</h1>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">npm</span> <span class="nx">start</span>

<span class="nx">Written</span> <span class="nx">with</span> <span class="p">[</span><span class="nx">hecticjeff</span><span class="o">/</span><span class="nx">bots</span><span class="p">](</span><span class="nx">https</span><span class="o">:</span><span class="err">//github.com/hecticjeff/bots) v#{version}</span>

  <span class="s2">&quot;&quot;&quot;, (err) -&gt;</span>
<span class="s2">          throw err if err</span>
<span class="s2">          console.log &quot;</span><span class="p">...</span><span class="nx">done</span><span class="err">&quot;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 